import { ensureExpression } from '../src';
import { pass } from './utils';

describe('invalid expression', () => {
  it('should report error', () => {
    try {
		  ensureExpression('[?');
    }
    catch (err) {
      expect(err).toBeInstanceOf(Error);
      if (err instanceof(Error)) {
        expect(err.message).toMatch(/offset/);
      }
    }
  });
});

describe('Appendix A', () => {
  //it('rfc6021.txt  459', () =>{ pass('(([0-1](\\.[1-3]?[0-9]))|(2\\.(0|([1-9]\\d*))))'); });
  //it('rfc6021.txt  513', () =>{ pass('\\d*(\\.\\d*){1,127}'); });
  //it('rfc6021.txt  529', () =>{ pass('\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?'); });
  it('rfc6021.txt  631', () =>{ pass('([0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*)?'); });
  it('rfc6021.txt  647', () =>{ pass('[0-9a-fA-F]{2}(:[0-9a-fA-F]{2}){5}'); });
  it('rfc6021.txt  933', () =>{ pass('((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}'); });
  // dangling | without a completed branch -> it('rfc6021.txt  938', () =>{ pass('(([^:]+:){6}(([^:]+:[^:]+)|(.*\\..*)))|'); });
  it('rfc6021.txt 1026', () =>{ pass('((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}'); });
  //it('rfc6021.txt 1031', () =>{ pass('(([^:]+:){6}(([^:]+:[^:]+)|(.*\\..*)))|'); });
  it('rfc6020.txt 6647', () =>{ pass('[0-9a-fA-F]*'); });
  //it('rfc6095.txt 2544', () =>{ pass('\\S(.*\\S)?'); });
  it('rfc6110.txt 1583', () =>{ pass('[aeiouy]*'); });
  it('rfc6110.txt 3222', () =>{ pass('[A-Z][a-z]*'); });
  it('rfc6536.txt 1583', () =>{ pass('\\*'); });
  it('rfc6536.txt 1632', () =>{ pass('[^\\*].*'); });
  it('rfc6643.txt  524', () =>{ pass('\\p{IsBasicLatin}{0,255}'); });
  //it('rfc6728.txt 3480', () =>{ pass('\\S+'); });
  //it('rfc6728.txt 3500', () =>{ pass('\\S(.*\\S)?'); });
  //it('rfc6991.txt  477', () =>{ pass('(([0-1](\\.[1-3]?[0-9]))|(2\\.(0|([1-9]\\d*))))'); });
  //it('rfc6991.txt  525', () =>{ pass('\\d*(\\.\\d*){1,127}'); });
  it('rfc6991.txt  541', () =>{ pass('[a-zA-Z_][a-zA-Z0-9\\-_.]*'); });
  it('rfc6991.txt  542', () =>{ pass('.|..|[^xX].*|.[^mM].*|..[^lL].*'); });
  //it('rfc6991.txt  571', () =>{ pass('\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?'); });
  it('rfc6991.txt  665', () =>{ pass('([0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*)?'); });
  it('rfc6991.txt  693', () =>{ pass('[0-9a-fA-F]{2}(:[0-9a-fA-F]{2}){5}'); });
  it('rfc6991.txt  725', () =>{ pass('([0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*)?'); });
  it('rfc6991.txt  743', () =>{ pass('[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-'); });
  it('rfc6991.txt 1041', () =>{ pass('((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}'); });
  //it('rfc6991.txt 1046', () =>{ pass('(([^:]+:){6}(([^:]+:[^:]+)|(.*\\..*)))|'); });
  it('rfc6991.txt 1099', () =>{ pass('[0-9\\.]*'); });
  it('rfc6991.txt 1109', () =>{ pass('[0-9a-fA-F:\\.]*'); });
  it('rfc6991.txt 1164', () =>{ pass('((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}'); });
  // dangling | without a complete branch -> it('rfc6991.txt 1169', () =>{ pass('(([^:]+:){6}(([^:]+:[^:]+)|(.*\\..*)))|'); });
  it('rfc7407.txt  933', () =>{ pass('([0-9a-fA-F]){2}(:([0-9a-fA-F]){2}){0,254}'); });
  it('rfc7407.txt 1494', () =>{ pass('([0-9a-fA-F]){2}(:([0-9a-fA-F]){2}){4,31}'); });
  //it('rfc7758.txt  703', () =>{ pass('\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?'); });
  //it('rfc7758.txt 1358', () =>{ pass('\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?'); });
  //it('rfc7895.txt  349', () =>{ pass('\\d{4}-\\d{2}-\\d{2}'); });
  it('rfc7950.txt 8323', () =>{ pass('[0-9a-fA-F]*'); });
  it('rfc7950.txt 8355', () =>{ pass('[a-zA-Z_][a-zA-Z0-9\\-_.]*'); });
  it('rfc7950.txt 8356', () =>{ pass('[xX][mM][lL].*'); });
  //it('rfc8040.txt 4713', () =>{ pass('\\d{4}-\\d{2}-\\d{2}'); });
  it('rfc8049.txt 6704', () =>{ pass('[A-Z]{2}'); });
  it('rfc8194.txt  629', () =>{ pass('\\*'); });
  it('rfc8194.txt  637', () =>{ pass('[0-9]{8}\\.[0-9]{6}'); });
  //it('rfc8194.txt  905', () =>{ pass('Z|[\\+\\-]\\d{2}:\\d{2}'); });
  it('rfc8194.txt  963', () =>{ pass('(2((2[4-9])|(3[0-9]))\\.).*'); });
  it('rfc8194.txt  974', () =>{ pass('(([fF]{2}[0-9a-fA-F]{2}):).*'); });
  it('rfc8299.txt 7986', () =>{ pass('[A-Z]{2}'); });
  it('rfc8341.txt 1878', () =>{ pass('\\*'); });
  it('rfc8341.txt 1927', () =>{ pass('[^\\*].*'); });
  it('rfc8407.txt 1723', () =>{ pass('[0-9\\.]*'); });
  it('rfc8407.txt 1749', () =>{ pass('[a-zA-Z_][a-zA-Z0-9\\-_.]*'); });
  it('rfc8407.txt 1750', () =>{ pass('.|..|[^xX].*|.[^mM].*|..[^lL].*'); });
  //it('rfc8525.txt  550', () =>{ pass('\\d{4}-\\d{2}-\\d{2}'); });
  it('rfc8776.txt  838', () =>{ pass('/?([a-zA-Z0-9\\-_.]+)(/[a-zA-Z0-9\\-_.]+)*'); });
  it('rfc8776.txt  874', () =>{ pass('([a-zA-Z0-9\\-_.]+:)*'); });
  //it('rfc8819.txt  311', () =>{ pass('[\\S ]+'); });
  it('rfc8944.txt  596', () =>{ pass('[0-9a-fA-F]{2}(:[0-9a-fA-F]{2}){7}'); });
});
